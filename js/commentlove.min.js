jQuery.noConflict();jQuery(document).ready(function($){var siteURL;if(NGLOVE.website_url!=""){siteURL=NGLOVE.website_url}else{siteURL=$("#url").val()}var getPostsButton=$("#ng-cl-get-posts");var clMessageField=$("#cl_messages");var clLatestPosts=$("#cl_latest_posts");var NG_CommentLove={init:function(){if(siteURL){NG_CommentLove.getPosts()}getPostsButton.click(function(e){e.preventDefault();NG_CommentLove.getPosts()})},checkURL:function(){if(!siteURL){siteURL=$("#url").val()}if(typeof siteURL=="undefined"){return false}if(!siteURL.length>1){return false}if(siteURL.toLowerCase().substring(0,7)!="http://"&&siteURL.toLowerCase().substring(0,8)!="https://"){return false}return true},getPosts:function(){NG_CommentLove.addSpinner();if(NG_CommentLove.checkURL()==false){clMessageField.empty().append("<p>"+NGLOVE.message_no_url+"</p>");NG_CommentLove.removeSpinner();return false}var data={action:"ng_get_latest_blog_post",url:siteURL,nonce:NGLOVE.nonce};$.ajax({type:"POST",data:data,url:NGLOVE.ajaxurl,xhrFields:{withCredentials:true},success:function(response){NG_CommentLove.removeSpinner();if(response.success!=true){clMessageField.empty().append(response.data);return}var clPostsTemplate=wp.template("ng-commentlove");var clTemplateData={posts:response.data};clLatestPosts.empty().append(clPostsTemplate(clTemplateData));NG_CommentLove.populateHiddenField()}})},addSpinner:function(){getPostsButton.attr("disabled",true);getPostsButton.after('<i id="ng-love-spinner" class="fa fa-spinner fa-spin"></i>')},removeSpinner:function(){getPostsButton.attr("disabled",false);$("#ng-love-spinner").remove()},populateHiddenField:function(){$('input[name="cl_post_title"]').change(function(){var url=$(this).data("url");$("#cl_post_url").val(url)})}};NG_CommentLove.init()});