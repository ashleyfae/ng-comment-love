(()=>{"use strict";function e(){var e=NGLOVE.website_url,t=document.getElementById("url");return""===e&&t&&(e=t.value),e}function t(e){var t=document.getElementById("comment-love-messages"),c=document.getElementById("comment-love-latest-posts");t.innerHTML="",function(e){if(void 0===e)return!1;if(!e.length>1)return!1;if("http://"!==e.toLowerCase().substring(0,7)&&"https://"!==e.toLowerCase().substring(0,8))return!1;return!0}(e)?(c.innerHTML="<p>"+NGLOVE.loadingPosts+"</p>",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o={method:t,credentials:"same-origin",headers:{"Content-Type":"application/json","X-WP-Nonce":NGLOVE.restNonce}};return Object.keys(n).length&&(o.body=JSON.stringify(n)),fetch(NGLOVE.restBase+e,o).then((function(e){return e.ok?e.json():Promise.reject(e)}))}("/posts","POST",{url:e}).then((function(e){if(console.log("Posts",e),!e.posts.length)throw new Error;var t;c.innerHTML=(t=e.posts,'<ul>\n<li>\n\t<input type="radio" id="no-love" name="cl_post_title" value="" data-url="">\n\t<label for="no-love">'.concat(NGLOVE.noLove,"</label>\n</li>\n").concat(t.map(n).join("\n"),"\n</ul>")),function(){var e=document.getElementsByName("cl_post_title");if(!e)return;e.forEach((function(e){e.checked&&o(e),e.addEventListener("change",(function(t){e.checked&&o(e)}))}))}()})).catch((function(e){console.log("Caught error",e),r(NGLOVE.noPostsFound),c.innerHTML=""}))):r(NGLOVE.message_no_url)}function n(e){var t=e.isSelected?"checked":"";return'\n<li>\n\t<input type="radio" id="'.concat(e.identifier,'" name="cl_post_title" value="').concat(e.title,'" data-url="').concat(e.url,'" ').concat(t,'>\n\t<label for="').concat(e.identifier,'">').concat(e.title,"</label>\n</li>\n")}function o(e){var t=document.getElementById("cl_post_url");t&&(t.value=e.getAttribute("data-url"))}function r(e){var t=document.getElementById("comment-love-messages");t?t.innerHTML='<p class="comment-love-error">'+e+"</p>":console.log("NG Comment Love Error",e)}document.addEventListener("DOMContentLoaded",(function(){var n=e();n&&t(n);var o=document.getElementById("comment-love-get-posts");o&&o.addEventListener("click",(function(n){n.preventDefault(),t(e())}))}))})();